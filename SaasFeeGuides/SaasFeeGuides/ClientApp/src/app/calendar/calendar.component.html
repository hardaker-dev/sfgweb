

<calendar-header [(view)]="view"
                 [(viewDate)]="viewDate">
</calendar-header>

<context-menu #menu>
  <ng-template contextMenuItem (execute)="addBooking($event.item)">  
      Add booking
  </ng-template>
  <ng-template contextMenuItem (execute)="addDate($event.item)">  
      Add date
  </ng-template>
</context-menu>

<ng-template #weekHeaderTemplate let-days="days" let-locale="locale" let-dayHeaderClicked="dayHeaderClicked">
  <div class="cal-day-headers">
    <div class="cal-header"
         *ngFor="let day of days"
         [class.cal-past]="day.isPast"
         [class.cal-today]="day.isToday"
         [class.cal-future]="day.isFuture"
         [class.cal-weekend]="day.isWeekend"
         (click)="dayHeaderClicked.emit({day: day})"
         [contextMenu]="menu"
         [contextMenuSubject]="day.date">
      <b>{{ day.date | calendarDate:'weekViewColumnHeader':locale }}</b><br>
      <span>{{ day.date | calendarDate:'weekViewColumnSubHeader':locale }}</span>
    </div>
  </div>
</ng-template>

<ng-template #hourSegmentTemplate
             let-segment="segment"
             let-locale="locale"
             let-segmentHeight="segmentHeight"
             let-isTimeLabel="isTimeLabel">
  <div class="cal-hour-segment"
       [style.height.px]="segmentHeight"
       [class.cal-hour-start]="segment.isStart"
       [class.cal-after-hour-start]="!segment.isStart"
        [contextMenu]="menu"
        [contextMenuSubject]="segment.date"
      >
    <div class="cal-time" *ngIf="isTimeLabel">
      {{ segment.date | calendarDate:'weekViewHour':locale }}
    </div>

  </div>
</ng-template>
<ng-template [ngTemplateOutlet]="customTemplate || defaultTemplate"
             [ngTemplateOutletContext]="{
        segment: segment,
        locale: locale,
        segmentHeight: segmentHeight,
        isTimeLabel: isTimeLabel
      }">
</ng-template>

<div [ngSwitch]="view">
  <mwl-calendar-week-view *ngSwitchCase="'week'"
                          [viewDate]="viewDate"
                          [events]="events"
                          [refresh]="refresh"
                          (eventTimesChanged)="eventTimesChanged($event)"
                          [dayStartHour]="7"
                          [dayEndHour]="22"
                          (dayHeaderClicked)="viewDate = $event.day.date"
                          [headerTemplate]="weekHeaderTemplate"
                          [hourSegmentTemplate]="hourSegmentTemplate">
    >
  </mwl-calendar-week-view>
</div>
